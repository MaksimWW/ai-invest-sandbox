# ü§ñ –ü–û–®–ê–ì–û–í–û–ï –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï TELEGRAM –ë–û–¢–ê

## –®–ê–ì 1: –ü–û–î–ì–û–¢–û–í–ö–ê –ò –ó–ê–ü–£–°–ö

### 1.1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ —Ñ–∞–π–ª–µ `.env` –µ—Å—Ç—å –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
```bash
python test_telegram_step_by_step.py
```

### 1.2. –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
```bash
python daily_plan_bot.py bot
```

–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
```
ü§ñ Telegram –±–æ—Ç –∑–∞–ø—É—â–µ–Ω...
```

---

## –®–ê–ì 2: –ë–ê–ó–û–í–´–ï –ö–û–ú–ê–ù–î–´

### 2.1. –ö–æ–º–∞–Ω–¥–∞ `/help`
**–ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ–º:** –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∫–æ–º–∞–Ω–¥

**–î–µ–π—Å—Ç–≤–∏–µ:** –û—Ç–ø—Ä–∞–≤—å—Ç–µ –±–æ—Ç—É –≤ Telegram: `/help`

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
ü§ñ –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:

/log BUY|SELL TICKER QTY PRICE - –∑–∞–ø–∏—Å–∞—Ç—å —Å–¥–µ–ª–∫—É
–ü—Ä–∏–º–µ—Ä: /log BUY YNDX 10 2500.50

/prices - –ø–æ–∫–∞–∑–∞—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ —Ü–µ–Ω—ã
/signals - –ø–æ–∫–∞–∑–∞—Ç—å —Ç–æ—Ä–≥–æ–≤—ã–µ —Å–∏–≥–Ω–∞–ª—ã
/debug - –ø–æ–∫–∞–∑–∞—Ç—å –ª–æ–≥ –æ—Ç–ª–∞–¥–∫–∏
/config - –ø–æ–∫–∞–∑–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Google Sheets
/test_sheets - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Google Sheets
/help - –ø–æ–∫–∞–∑–∞—Ç—å —ç—Ç—É —Å–ø—Ä–∞–≤–∫—É

–î–æ—Å—Ç—É–ø–Ω—ã–µ —Ç–∏–∫–µ—Ä—ã: YNDX, FXIT
```

### 2.2. –ö–æ–º–∞–Ω–¥–∞ `/config`
**–ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ–º:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

**–î–µ–π—Å—Ç–≤–∏–µ:** –û—Ç–ø—Ä–∞–≤—å—Ç–µ –±–æ—Ç—É: `/config`

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Google Sheets:

üì° Webhook URL: https://script.google.com/macros/s/AKfycbz67i...
üîë Token: –ù–ê–°–¢–†–û–ï–ù–û

üí° –î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ /test_sheets
```

---

## –®–ê–ì 3: –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï API –ò–ù–¢–ï–ì–†–ê–¶–ò–ô

### 3.1. –ö–æ–º–∞–Ω–¥–∞ `/test_sheets`
**–ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ–º:** –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Google Sheets

**–î–µ–π—Å—Ç–≤–∏–µ:** –û—Ç–ø—Ä–∞–≤—å—Ç–µ –±–æ—Ç—É: `/test_sheets`

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
üîÑ –¢–µ—Å—Ç–∏—Ä—É—é –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Google Sheets...
‚úÖ –¢–µ—Å—Ç Google Sheets —É—Å–ø–µ—à–µ–Ω!
üìù –û—Ç–≤–µ—Ç: {"ok":true,"message":"Trade logged successfully"...
```

### 3.2. –ö–æ–º–∞–Ω–¥–∞ `/prices`
**–ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ–º:** –ü–æ–ª—É—á–µ–Ω–∏–µ —Ü–µ–Ω —á–µ—Ä–µ–∑ Tinkoff API

**–î–µ–π—Å—Ç–≤–∏–µ:** –û—Ç–ø—Ä–∞–≤—å—Ç–µ –±–æ—Ç—É: `/prices`

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
üí∞ –ê–∫—Ç—É–∞–ª—å–Ω—ã–µ —Ü–µ–Ω—ã:
‚Ä¢ YNDX: 2 510,35 ‚ÇΩ
‚Ä¢ FXIT: 120,45 ‚ÇΩ
```

### 3.3. –ö–æ–º–∞–Ω–¥–∞ `/signals`
**–ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ–º:** –ì–µ–Ω–µ—Ä–∞—Ü–∏—é —Ç–æ—Ä–≥–æ–≤—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤

**–î–µ–π—Å—Ç–≤–∏–µ:** –û—Ç–ø—Ä–∞–≤—å—Ç–µ –±–æ—Ç—É: `/signals`

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
üìä –¢–æ—Ä–≥–æ–≤—ã–µ —Å–∏–≥–Ω–∞–ª—ã:
‚Ä¢ YNDX: BUY
‚Ä¢ FXIT: HOLD
```

---

## –®–ê–ì 4: –û–°–ù–û–í–ù–ê–Ø –§–£–ù–ö–¶–ò–Ø - –õ–û–ì–ò–†–û–í–ê–ù–ò–ï –°–î–ï–õ–û–ö

### 4.1. –¢–µ—Å—Ç –∫–æ–º–∞–Ω–¥—ã `/log` (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è)
**–ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ–º:** –ó–∞–ø–∏—Å—å —Å–¥–µ–ª–∫–∏ –≤ Google Sheets

**–î–µ–π—Å—Ç–≤–∏–µ:** –û—Ç–ø—Ä–∞–≤—å—Ç–µ –±–æ—Ç—É: `/log BUY YNDX 10 2500.50`

**–û–∂–∏–¥–∞–µ–º–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–æ–≤:**
1. ```
   üìù –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é —Å–¥–µ–ª–∫—É: BUY YNDX 10 —à—Ç –ø–æ 2500.50...
   ```
2. ```
   ‚úÖ –∑–∞–ø–∏—Å–∞–ª —Å–¥–µ–ª–∫—É ({"ok":true,"message":"Trade logged successfully"...})
   ```
3. ```
   üìä –î–µ—Ç–∞–ª–∏: YNDX BUY 10x2500.50 = 25005.00 ‚ÇΩ
   ```

### 4.2. –¢–µ—Å—Ç –¥—Ä—É–≥–∏—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤
**–î–µ–π—Å—Ç–≤–∏—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**

- `/log SELL FXIT 5 120.25` - –ø—Ä–æ–¥–∞–∂–∞ FXIT
- `/log BUY YNDX 1 2500,50` - —Å –∑–∞–ø—è—Ç–æ–π –≤ —Ü–µ–Ω–µ
- `/log invalid format` - –Ω–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—à–∏–±–∫–∞)

---

## –®–ê–ì 5: –û–¢–õ–ê–î–ö–ê –û–®–ò–ë–û–ö

### 5.1. –ö–æ–º–∞–Ω–¥–∞ `/debug`
**–ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ–º:** –ß—Ç–µ–Ω–∏–µ –ª–æ–≥–æ–≤ –æ—Ç–ª–∞–¥–∫–∏

**–î–µ–π—Å—Ç–≤–∏–µ:** –û—Ç–ø—Ä–∞–≤—å—Ç–µ –±–æ—Ç—É: `/debug`

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
üìã –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –ª–æ–≥–∞:
```
[–°–æ–¥–µ—Ä–∂–∏–º–æ–µ debug_sheets.log]

---

## –ü–†–û–í–ï–†–ö–ê –†–ï–ó–£–õ–¨–¢–ê–¢–û–í –í GOOGLE SHEETS

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥ `/log`, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–∞—à—É Google –¢–∞–±–ª–∏—Ü—É.

**–û–∂–∏–¥–∞–µ–º—ã–µ –∑–∞–ø–∏—Å–∏:**
| Date | Ticker | FIGI | Side | Price | Qty | Fees | Timestamp |
|------|--------|------|------|-------|-----|------|-----------|
| 2025-06-12 | TEST | TEST_FIGI | BUY | 100 | 1 | 0.1 | 2025-06-12T... |
| 2025-06-12 | YNDX | BBG004730N88 | BUY | 2500.5 | 10 | 0 | 2025-06-12T... |

---

## –í–û–ó–ú–û–ñ–ù–´–ï –û–®–ò–ë–ö–ò –ò –†–ï–®–ï–ù–ò–Ø

### –û—à–∏–±–∫–∞: "cannot access local variable 'log_trade'"
**–†–µ—à–µ–Ω–∏–µ:** –û–±–Ω–æ–≤–ª–µ–Ω –∫–æ–¥ –±–æ—Ç–∞ - –∏–º–ø–æ—Ä—Ç —Ñ—É–Ω–∫—Ü–∏–∏ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω –≤–Ω—É—Ç—Ä—å –±–ª–æ–∫–∞ try

### –û—à–∏–±–∫–∞: "FIGI –¥–ª—è [TICKER] –Ω–µ –Ω–∞–π–¥–µ–Ω"
**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ç–∏–∫–µ—Ä—ã: YNDX, FXIT

### –û—à–∏–±–∫–∞: "Sheets webhook –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω"
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ SHEETS_WEBHOOK_URL –∏ SHEETS_TOKEN –≤ .env

### –û—à–∏–±–∫–∞ Google Apps Script
**–†–µ—à–µ–Ω–∏–µ:** 
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ ID —Ç–∞–±–ª–∏—Ü—ã –≤ —Å–∫—Ä–∏–ø—Ç–µ
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ª–∏—Å—Ç –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è 'Sheet1'
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ —Å–∫—Ä–∏–ø—Ç–∞

---

## –ó–ê–í–ï–†–®–ï–ù–ò–ï –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤ –≤–∞—à Telegram –±–æ—Ç –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!

–î–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –±–æ—Ç–∞ –Ω–∞–∂–º–∏—Ç–µ `Ctrl+C` –≤ –∫–æ–Ω—Å–æ–ª–∏.
–ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è NewsAPI + RSS (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ, TTL 15 –º–∏–Ω).